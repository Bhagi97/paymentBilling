<div class="page-title">
                            <div class="title_left">
                                  <h3 style="margin-left:20px;">Users</h3>
                            </div>

</div>

    <div class="clearfix"></div>

<div class="panel">

                        <div id="collapseOne1" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
                            <table id="datatable" class="table table-striped">
                              <thead>
                                <tr>
                                  <th>Name</th>
                                  <th>Username</th>
                                  <th>Franchise Name</th>
                                  <th>Role</th>
                                  <th>Contact Number</th>
                                  <th>Status</th>
                                  <th>Toggle Status</th>
                                </tr>
                              </thead>
                              <tfoot style="display: table-header-group;">
                                <tr>
                                  <th>Name</th>
                                  <th>Username</th>
                                  <th>Franchise Name</th>
                                  <th>Role</th>
                                  <th>Contact Number</th>
                                  <th>Status</th>
                                  <th>Toggle Status</th>
                                </tr>
                              </tfoot>
                              <tbody>
                              {% for f in user_list %}
                                <tr>
                                  <td>{{f.name}}</a></td>
                                  <th><a href="mydir/edituser.html?id={{ f.id }}">{{f.user.username}}</a></th>
                                  <td>{{f.organisation}}</td>
                                  <td>{{f.role}}</td>
                                  <td>{{f.phoneno}}</td>
                                  {% if f.user.is_active %}
                                  <td>Active</td>
                                  {% else %}
                                  <td style="color:red;">Suspended</td>
                                  {% endif %}
                                  {% if f.user.is_active %}
                                  <td class="sus"><a href="#"><i class="fa fa-lg fa-ban" aria-hidden="true"></i></a></td>
                                  {% else %}
                                  <td class="sus"><a href="#"><i class="fa fa-lg fa-check" aria-hidden="true"></i></a></td>
                                  {% endif %}
                                </tr>
                              {% endfor %}
                              </tbody>
                            </table>
                          </div>
                        </div>
</div>

<script>
  jQuery(document).ready(function($){
                $(".del").on("click",function(){
                username =$(this).siblings()[1].children[0].innerHTML;
                alert(username);
                //document.getElementById('loader').style.display='block';
                    $.ajax({
                        url: "ajax/suspenduser/",
                        data: { 'deluser': username },
                        success: function(response){
                              document.getElementById('loader').style.display='none';
                              if(response.delete=='2')
                                  {
                                    var x = document.getElementById('notify-f');
                                    x.style.display = 'block';
                                  }
                              else
                                window.location.replace('viewusers.html');
                        },
                        error: function(){
                              // do action
                        }
                    });
                });
            });

  jQuery(document).ready(function($){
                $('#datatable').DataTable({bFilter: true, bInfo: false, bLengthChange: false,
                    initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value="">All</option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            if(d[0]=='<')
                                {
                                  d = d.split(/>|</);
                                  d = d[2]
                                }
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
                });

                $(".sus").on("click",function(){
                document.getElementById('loader').style.display='block';
                username =$(this).siblings()[1].children[0].innerHTML;
                    $.ajax({
                        url: "ajax/suspenduser/",
                        data: { 'sususer': username },
                        success: function(response){
                              document.getElementById('loader').style.display='none';
                              window.location.replace('viewusers.html');
                        },
                        error: function(){
                              // do action
                        }
                    });
                });
            });

</script>
